# dwarfbot tg
## Сессии

1. Создавать сессии командой (Cделано, требуется дальнейшее тестирование)

1. Изменять их имя и описание (сделано, требуется дальнейшее тестирование)

1. Сохранять для сессии список игроков (Cделано, требуется дальнейшее тестирование)

1. Сохранять и передавать сейвы (Cделано, требуется дальнейшее тестирование)

## Список игроков

1. Добавлять/удалять/изменять игроков, каждый может редактировать только себя (Cделано, требуется дальнейшее тестирование)

1. Редактировать порядок можно только шафлом, шафл не доступен после начала сессии (Cделано, требуется дальнейшее тестирование)

1. Показывать текущий список игроков отдельной командой и указывать чей шаг, когда завершится и тп инфу (Cделано, требуется дальнейшее тестирование)

1. Куратор может удалять из списка игроков. Если текущий ход был у удаленного игрока, необходимо передать ход следующему (Cделано, требуется дальнейшее тестирование)

## Сейвы

1. Игрок в разрезе сессии может загружать свой сейв, по загрузке сейва шаг игрока считается завершенным (Cделано, требуется дальнейшее тестирование)

1. Следующий игрок автоматически получает сейв в ЛС, если предыдущий игрок не сдал сейв вовремя - передаётся предыдущий сейв (Cделано, требуется дальнейшее тестирование)

1. Сейвы бекапятся и принимаются  в одном формате с ограничением по объему (Cделано, требуется дальнейшее тестирование)

1. Сейв переименовывается согласно маске - имя сессии, идентификатор игрока, номер шага (Cделано, требуется дальнейшее тестирование)

1. Все сейвы загружаются в облако (Cделано, требуется дальнейшее тестирование)

## Летопись

1. Во время своего хода любое сообщение текущего игрока с тегом сессии - записываем целиком в гуглодок, для удобства правки и поиска внутри чата обсуждений саксешнгейма. Пример сообщения:
Блядская гоблота вновь осадила славный #snakepants (Cделано, требуется дальнейшее тестирование)

1. Возвращаем ссылку на гуглодок по запросу и/или ссылку на скачивание документа (Cделано, требуется дальнейшее тестирование)


## Команды
Сессии:
    
    /create [arg]
        Создаёт сессию, если [arg] не указан с именем Untitled. Доступно только ранее зарегестрированным пользователям

    /delete
        Удаляет существующую сессию, возможно только для созданных сессий, активные и завершенные игры - удалить нельзя

    /name [arg]
        Переименовывает игру, в случае отсутсвия [arg] возвращает имя текущей игры

    /description [arg]+
        Изменяет описание игры. Аналогично /name

    /embark | start
        Переводит сессию в статус активной, необходимо что бы в сессии были игроки.

    /abandon | stop
        Переводит сессию в статус завершенной

Игроки:
    
    /toggle
        Добавляет или удаляет игрока из сессии, команда доступна всем, +выполняет функционал команды /auth

    /players
        Возвращает список игроков

    /shuffle
        Перемешивает список игроков. Доступна только в свежесозданной сессии.

    /skip
        Доступно для модератора сессии, передаёт игру следующему игроку

    /add
        Доступно для модератора сесии, добавляет в конец списка игрока. Необходимо что бы добавляемый игрок ранее выполнил /auth а так же, что бы сообщение было ответом на сообщение добавляемого игрока. Т.е. сначала жмем "Ответить" на любое сообщение целевого игрока, и вводим в ответ /add

    /round [shuffle]
        Повторяет список игроков в конец списка.
        Если хоть ничего не указано в [shuffle] - последовательность игроков будет повторена без изменений, любой текст в [shuffle] запустит перетасовку списка.

Летопись:
    
    /fact
    Добавление текста или картинки в летопись

Прочее:
    
    /auth
        Регистрирует пользователя. Приватное сообщение.

    /retire | next
        В личное сообщение. Останавливает текущий ход пользователя и ~передаёт сейв другому игроку. Приватное сообщение.

    /my
        В личное сообщение. Показывает информацию о всех сессиях где пишущий участник был игроком/куратором, список всех активных сессий, список всех сессий где игрок является текущим.

    /info [arg]
        В группу. Показывает информацию о текущей сессий если [arg] не указан. Отображает информацию о сессии по её ID или имени переданным в [arg] если таковая найдена
